apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base

namePrefix: prod-

patches:
  - target:
      kind: ConfigMap
      name: mining-management-web-config
    patch: |
      - op: replace
        path: /data/config.json
        value: |
          {
            "apiUrl": "https://api.mining.example.com",
            "production": true,
            "appTitle": "Mining Management System"
          }

  - target:
      kind: Deployment
      name: mining-management-web
    patch: |
      - op: replace
        path: /spec/replicas
        value: 3
